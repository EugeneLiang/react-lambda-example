---
  machine:
    node:
      version: "iojs-v3.0.0"
    environment:
      LAMBDA_BUCKET_NAME: react-lambda-example/lambda_versions
      STATIC_BUCKET_NAME: react-lambda-example/static_versions
      AWS_REGION: us-east-1
  test:
    override:
      -
        npm run test-circle
      -
        npm run release
  deployment:
    staging:
      branch: master
      commands:
        -
          npm run zip
        -
          npm run deploy
        -
          npm run deploy-static
        -
          git config --global user.email 'circleci@import.io'
        -
          git config --global user.name 'Circle CI'
        -
          ./tag.sh
